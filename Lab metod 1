#include <iostream>
#include <string>
#include <fstream>

class compareFiles
{
public:
	compareFiles(std::string &fileName1, std::string &fileName2)
		: i_(0), f1_(fileName1),
		f2_(fileName2)
	{
	}

	void search(std::ostream &out = std::cout)
	{
		std::string stringFirstFile, stringSecondFile, linesFirstFile, linesSecondFile;
		size_t lineFile1(0), lineFile2(0), countLine(0);
		while (!f1_.eof())
		{
			std::getline(f1_, stringFirstFile);
			lineFile1++;
			if (stringFirstFile == stringFirstFile)
				linesFirstFile += std::to_string(lineFile1) + ' ';
			while (!f2_.eof())
			{
				std::getline(f2_, stringSecondFile);
				lineFile2++;
				if (stringFirstFile == stringSecondFile)
				{
					linesSecondFile += std::to_string(lineFile2) + ' ';
					countLine++;
				}
			}
			if (countLine != 0)
			{
				out << "String : < " << stringFirstFile << " > First file : " << linesFirstFile << "lines; "
					<< " Second file : " << linesSecondFile << "lines" << std::endl;
			}
			countLine = lineFile2 = 0;
			linesFirstFile.clear();
			linesSecondFile.clear();
			f2_.seekg(0);
		}
	}

	~compareFiles()
	{
		f1_.close();
		f2_.close();
	}
private:
	std::fstream f1_, f2_;
	size_t i_;
};

int main() {
	std::string fileName1, fileName2;
	std::cout << "Enter the file name of first document : ";
	std::cin >> fileName1;
	std::cout << "Enter the file name of second document : ";
	std::cin >> fileName2;
	compareFiles first(fileName1, fileName2);
	first.search();
	return 0;
}
